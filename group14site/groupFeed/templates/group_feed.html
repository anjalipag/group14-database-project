
<!-- ChatGPT was used to style this page to make it look asthetic -->

{% load static %}

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{% static 'css/base.css' %}" rel="stylesheet">
<script>
  function confirmDelete(){
    return confirm("Are you sure you want to delete this user's post?");
  }
</script>


  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item active">
                <a class="nav-link" href="/group/saved">My Groups</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/saved">Saved Recommendations</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/group/browse">Browse Groups</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/group/create">Create Group</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/">Logout</a>
              </li>
            </ul>
          </div>
        </nav>
<div class="container my-5">
  {% for category, posts in category_posts.items %}
    <div class="card mb-5 shadow-sm">
      <div class="card-header bg-dark text-white">
        <h2 class="mb-0">{{ category }}</h2>
      </div>
      <div class="card-body poppins-bold p-0">
        <div class="table-responsive">
          <table class="table table-striped mb-0">
            <thead class="thead-dark">
              <tr>
                <th scope="col">Title</th>
                <th scope="col">Description</th>
                <th scope="col">Rating</th>
                <th scope="col">Posted By</th>
                <th scope="col">Posted At</th>
                <th scope="col">View More</th>
              </tr>
            </thead>
            <tbody class="poppins-regular">
              {% for post in posts %}
                <tr>
                  <td><strong>{{ post.title }}</strong></td>
                  <td>{{ post.description }}</td>
                  <td>{{ post.overall_rating }}</td>
                  <td>{{ post.posted_by }}</td>
                  <td>{{ post.time_stamp }}</td>
                  <td>
                    <a href="{% url 'group_detail' post.post_id %}" class="btn btn-sm btn-outline-primary mb-2">See More</a>
                    {% if user_id == admin_id %}
                    <form method ="POST" action="{%url 'delete_post' post.post_id %}" class = "d-inline" onsubmit="return confirmDelete();">
                      {% csrf_token %}
                      <button type="submit" class = "btn btn-sm btn-danger" style="color:red; background-color:white; border:2px solid red;">Delete Post</button>
                    </form>
                    {% endif %}
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  {% endfor %}
</div>
