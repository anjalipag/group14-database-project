
<!-- ChatGPT was used to style this page to make it look asthetic -->

{% load static %}

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{% static 'css/base.css' %}" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Special+Gothic+Expanded+One&display=swap" rel="stylesheet">

  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item active">
                <a class="nav-link" href="/group/saved">My Groups</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/saved">Saved Recommendations</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/group/browse">Browse Groups</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/group/create">Create Group</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/">Logout</a>
              </li>
            </ul>
          </div>
        </nav>
<div class="container my-5">
  {% for category, posts in category_posts.items %}
    <div class="card mb-5 shadow-sm">
      <div class="card-header bg-dark text-white">
        <h2 class="mb-0">{{ category }}</h2>
      </div>
      <div class="card-body poppins-bold p-0">
        <div class="table-responsive">
          <table class="table table-striped mb-0">
            <thead class="thead-dark">
              <tr>
                <th scope="col">Title</th>
                <th scope="col">Description</th>
                <th scope="col">Rating</th>
                <th schope="col">Posted By</th>
                <th scope="col">Posted At</th>
                <th scope="col">Discover & Save</th>
                <th scope="col"> </th>
              </tr>
            </thead>
            <tbody class="poppins-regular">
              {% for post in posts %}
                <tr>
                  <td><strong>{{ post.title }}</strong></td>
                  <td>{{ post.description }}</td>
                  <td>{{ post.overall_rating }}</td>
                  <td>{{ post.posted_by }}</td>
                  <td>{{ post.time_stamp }}</td>
                  <td class="d-flex gap-2">
  <a href="{% url 'group_detail' post.post_id %}" class="btn btn-sm btn-outline-primary mr-2">
    See More
  </a>
<form action="{% url 'save_recc' post.post_id post.posted_by_id group_id %}" method="post" style="display:inline;">
    {% csrf_token %}
    <button type="submit" class="btn btn-sm btn-success">Save</button>
</form>

</td>
                  <td>

                    {% if user_id == admin_id %}
                      <form method="POST" action="{% url 'delete_post' post.post_id %}" class="d-inline" onsubmit="return confirmDelete();">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-danger" style="color:red; background-color:white; border:2px solid red;">Delete Post</button>
                      </form>
                    {% endif %}
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  {% endfor %}
</div>
